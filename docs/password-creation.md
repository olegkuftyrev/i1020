# –ü—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –ø–∞—Ä–æ–ª—è –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

–î–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø–æ–ª–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –∏ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–æ–ª—è –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–∏—Å—Ç–µ–º–µ.

## üîê –û–±–∑–æ—Ä –ø—Ä–æ—Ü–µ—Å—Å–∞

–ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–∞—Ä–æ–ª—å –ø—Ä–æ—Ö–æ–¥–∏—Ç —Å–ª–µ–¥—É—é—â–∏–µ —ç—Ç–∞–ø—ã:
1. –í–≤–æ–¥ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
2. –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –±—ç–∫–µ–Ω–¥–µ
3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ mixin
4. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

## üìù –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

### 1. –§—Ä–æ–Ω—Ç–µ–Ω–¥ - –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

**–§–∞–π–ª:** `resources/js/pages/auth/register.tsx`

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –ø–∞—Ä–æ–ª—å –≤ —Ñ–æ—Ä–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:

```typescript
type RegisterForm = {
  name: string
  email: string
  password: string
  password_confirmation: string
}
```

- –ü–∞—Ä–æ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ –±—ç–∫–µ–Ω–¥ —á–µ—Ä–µ–∑ POST-–∑–∞–ø—Ä–æ—Å –Ω–∞ `/api/auth/register`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Inertia.js –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã
- –ü–∞—Ä–æ–ª—å –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –≤–∏–¥–µ plain text (–æ–±—ã—á–Ω–æ–π —Å—Ç—Ä–æ–∫–∏)

### 2. –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

**–§–∞–π–ª:** `app/validators/user.ts`

–ü–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–∞—Ä–æ–ª—å –ø—Ä–æ—Ö–æ–¥–∏—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é:

```typescript
export const userSchema = vine.object({
  name: vine.string().minLength(3).maxLength(50),
  email: vine.string().trim().email().unique({ table: 'users', column: 'email' }),
  password: vine.string().minLength(6).maxLength(32),
})
```

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ø–∞—Ä–æ–ª—é:**
- –ú–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤
- –ú–∞–∫—Å–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞
- –¢–∏–ø: —Å—Ç—Ä–æ–∫–∞ (string)

**–í–∞–ª–∏–¥–∞—Ç–æ—Ä:** `createUserValidator` –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç —Å—Ö–µ–º—É –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–∞–Ω–Ω—ã–µ.

### 3. –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä - –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–∞

**–§–∞–π–ª:** `app/controllers/registered_users_controller.ts`

–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ —Å–æ–∑–¥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

```typescript
async store({ request, auth, response, session }: HttpContext) {
  // –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
  const data = await request.validateUsing(createUserValidator)

  // –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  const user = await User.create({
    name: data.name,
    email: data.email,
    password: data.password, // Plain text –ø–∞—Ä–æ–ª—å
  })

  // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—Ö–æ–¥ –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
  await auth.use('web').login(user, !!request.input('remember_me'))

  return response.redirect().toRoute('dashboard')
}
```

**–í–∞–∂–Ω–æ:** –ü–∞—Ä–æ–ª—å –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –∫–∞–∫ plain text –≤ `User.create()`. –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –º–æ–¥–µ–ª–∏.

### 4. –ú–æ–¥–µ–ª—å User - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ

**–§–∞–π–ª:** `app/models/user.ts`

–ú–æ–¥–µ–ª—å User –∏—Å–ø–æ–ª—å–∑—É–µ—Ç mixin `withAuthFinder`, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ö–µ—à–∏—Ä—É–µ—Ç –ø–∞—Ä–æ–ª—å:

```typescript
import hash from '@adonisjs/core/services/hash'
import { withAuthFinder } from '@adonisjs/auth/mixins/lucid'

const AuthFinder = withAuthFinder(() => hash.use('scrypt'), {
  uids: ['email'],
  passwordColumnName: 'password',
})

export default class User extends compose(BaseModel, AuthFinder) {
  @column()
  declare email: string

  @column({ serializeAs: null })
  declare password: string  // –•–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å
}
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç `withAuthFinder`:**

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** Mixin –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ –∏ —Ö–µ—à–∏—Ä—É–µ—Ç –ø–∞—Ä–æ–ª—å –ø–µ—Ä–µ–¥ –∑–∞–ø–∏—Å—å—é –≤ –ë–î
2. **–ê–ª–≥–æ—Ä–∏—Ç–º:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è scrypt (—É–∫–∞–∑–∞–Ω –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)
3. **–ü–æ–ª–µ –ø–∞—Ä–æ–ª—è:** `serializeAs: null` –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø–∞—Ä–æ–ª—å –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç—Å—è –≤ JSON-–æ—Ç–≤–µ—Ç—ã API

**–ú–µ—Ç–æ–¥—ã, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º—ã–µ mixin:**
- `User.verifyCredentials(email, password)` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª—è –ø—Ä–∏ –≤—Ö–æ–¥–µ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ `User.create()` –∏ `user.save()`

### 5. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

**–§–∞–π–ª:** `config/hash.ts`

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è:

```typescript
const hashConfig = defineConfig({
  default: 'scrypt',

  list: {
    scrypt: drivers.scrypt({
      cost: 16384,           // –í—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å
      blockSize: 8,          // –†–∞–∑–º–µ—Ä –±–ª–æ–∫–∞
      parallelization: 1,    // –ü–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º
      maxMemory: 33554432,   // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø–∞–º—è—Ç—å (32 MB)
    }),
  },
})
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã scrypt:**
- **cost:** 16384 - –ø–∞—Ä–∞–º–µ—Ç—Ä —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ (–±–æ–ª—å—à–µ = –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ, –Ω–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ)
- **blockSize:** 8 - —Ä–∞–∑–º–µ—Ä –±–ª–æ–∫–∞ –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
- **parallelization:** 1 - —É—Ä–æ–≤–µ–Ω—å –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–∞
- **maxMemory:** 33554432 (32 MB) - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏

**–ü–æ—á–µ–º—É scrypt?**
- –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ –∞—Ç–∞–∫–∞–º –ø–µ—Ä–µ–±–æ—Ä–∞ (brute-force)
- –ó–∞—â–∏—Ç–∞ –æ—Ç –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã—Ö –∞—Ç–∞–∫ (ASIC, FPGA)
- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º

### 6. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

**–ú–∏–≥—Ä–∞—Ü–∏—è:** `database/migrations/1754193357723_create_users_table.ts`

–¢–∞–±–ª–∏—Ü–∞ users:

```typescript
table.string('password').notNullable()
```

- –ü–æ–ª–µ `password` —Ö—Ä–∞–Ω–∏—Ç —Ö–µ—à –ø–∞—Ä–æ–ª—è, –∞ –Ω–µ plain text
- –¢–∏–ø: VARCHAR (—Å—Ç—Ä–æ–∫–∞)
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ (NOT NULL)

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- –í –ë–î —Ö—Ä–∞–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ö–µ—à, –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è plain text –ø–∞—Ä–æ–ª—å
- –•–µ—à –Ω–µ–ª—å–∑—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ–±—Ä–∞—Ç–Ω–æ –≤ –ø–∞—Ä–æ–ª—å (–æ–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω—è—è —Ñ—É–Ω–∫—Ü–∏—è)

## üîÑ –°—Ö–µ–º–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –§—Ä–æ–Ω—Ç–µ–Ω–¥       ‚îÇ
‚îÇ  (React Form)   ‚îÇ
‚îÇ  Plain Password ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ POST /api/auth/register
         ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –í–∞–ª–∏–¥–∞—Ü–∏—è      ‚îÇ
‚îÇ  (VineJS)       ‚îÇ
‚îÇ  6-32 —Å–∏–º–≤–æ–ª–æ–≤  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
         ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä     ‚îÇ
‚îÇ  User.create()  ‚îÇ
‚îÇ  Plain Password ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –ú–æ–¥–µ–ª—å User    ‚îÇ
‚îÇ  withAuthFinder ‚îÇ
‚îÇ  mixin          ‚îÇ
‚îÇ  hash.use()     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ (scrypt)
         ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö    ‚îÇ
‚îÇ  Hashed Password‚îÇ
‚îÇ  (scrypt hash)  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª—è –ø—Ä–∏ –≤—Ö–æ–¥–µ

–î–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è –ø—Ä–∏ –≤—Ö–æ–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–µ—Ç–æ–¥ `User.verifyCredentials()`:

**–§–∞–π–ª:** `app/controllers/session_controller.ts`

```typescript
const user = await User.verifyCredentials(email, password)
```

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –ú–µ—Ç–æ–¥ `verifyCredentials` –Ω–∞—Ö–æ–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ email
2. –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –≤–≤–µ–¥–µ–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å —Å —Ö–µ—à–µ–º –∏–∑ –ë–î
3. –ï—Å–ª–∏ –ø–∞—Ä–æ–ª—å –≤–µ—Ä–Ω—ã–π - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
4. –ï—Å–ª–∏ –Ω–µ–≤–µ—Ä–Ω—ã–π - –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ `E_INVALID_CREDENTIALS`

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ó–∞—â–∏—Ç–∞ –ø–∞—Ä–æ–ª—è

1. **–•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –ü–∞—Ä–æ–ª—å –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ plain text
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º scrypt
   - –•–µ—à –Ω–µ–ª—å–∑—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ–±—Ä–∞—Ç–Ω–æ –≤ –ø–∞—Ä–æ–ª—å

2. **–°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è:**
   - `@column({ serializeAs: null })` –∏—Å–∫–ª—é—á–∞–µ—Ç –ø–∞—Ä–æ–ª—å –∏–∑ JSON-–æ—Ç–≤–µ—Ç–æ–≤
   - –ü–∞—Ä–æ–ª—å –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥

3. **–í–∞–ª–∏–¥–∞—Ü–∏—è:**
   - –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ 6 —Å–∏–º–≤–æ–ª–æ–≤
   - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ 32 —Å–∏–º–≤–æ–ª–∞
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞

4. **–ê–ª–≥–æ—Ä–∏—Ç–º scrypt:**
   - –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ –ø–µ—Ä–µ–±–æ—Ä—É –ø–∞—Ä–æ–ª–µ–π
   - –ó–∞—â–∏—Ç–∞ –æ—Ç –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã—Ö –∞—Ç–∞–∫
   - –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–ª–æ–∂–Ω–æ—Å—Ç–∏

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ä–æ–ª–∏ –¥–ª–∏–Ω–æ–π –Ω–µ –º–µ–Ω–µ–µ 8 —Å–∏–º–≤–æ–ª–æ–≤
   - –ö–æ–º–±–∏–Ω–∞—Ü–∏—è –±—É–∫–≤, —Ü–∏—Ñ—Ä –∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
   - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞

2. **–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:**
   - –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ª–æ–≥–∏—Ä—É–π—Ç–µ –ø–∞—Ä–æ–ª–∏
   - –ù–µ —Å–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –ø–∞—Ä–æ–ª–∏ –≤ plain text
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ mixin
   - –ù–µ –∏–∑–º–µ–Ω—è–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã scrypt –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `app/models/user.ts` - –ú–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `app/controllers/registered_users_controller.ts` - –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- `app/validators/user.ts` - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- `config/hash.ts` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
- `app/controllers/session_controller.ts` - –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

### –ü–æ–ª–µ–∑–Ω—ã–µ –º–µ—Ç–æ–¥—ã

**–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
```typescript
const user = await User.create({
  name: 'John Doe',
  email: 'john@example.com',
  password: 'plain_password'  // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞—Ö–µ—à–∏—Ä—É–µ—Ç—Å—è
})
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª—è:**
```typescript
const user = await User.verifyCredentials(email, password)
```

**–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è:**
```typescript
user.password = 'new_password'  // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞—Ö–µ—à–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏
await user.save()
```

## ‚úÖ –í—ã–≤–æ–¥—ã

1. –ü–∞—Ä–æ–ª—å –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –∫–∞–∫ plain text –æ—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –¥–æ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞
2. –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞ (VineJS)
3. –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ `withAuthFinder` mixin
4. –í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —Ö—Ä–∞–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ö–µ—à –ø–∞—Ä–æ–ª—è (scrypt)
5. –ü–∞—Ä–æ–ª—å –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç—Å—è –≤ JSON-–æ—Ç–≤–µ—Ç—ã API
6. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª—è –ø—Ä–∏ –≤—Ö–æ–¥–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `verifyCredentials()`

**–ì–ª–∞–≤–Ω–æ–µ:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –Ω–µ –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é —Ö–µ—à–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–æ–ª—å - —ç—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –º–æ–¥–µ–ª–∏ —á–µ—Ä–µ–∑ mixin `withAuthFinder`.

